{"version":3,"sources":["game.js"],"names":["cc","Class","extends","Component","properties","prefabArr","default","type","Prefab","prefabHeight","backPrefab","onLoad","nodeWidth","node","width","nodeHeight","height","speed","IsChange","nodeArr","createShape","createPrefab","prefab","prefabNode","instantiate","parentNode","x","y","prefabArrTemp","i","offSet","log","index","Math","floor","random","setPosition","addChild","push","console","update","dt","updatePrefatY","length","scheduleOnce","showNext","prefabNext","createBackOfGame","j"],"mappings":"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","file":"game.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        prefabArr : {\n            default : [],\n            type    : [cc.Prefab],\n        },\n        prefabHeight : 20,\n        backPrefab  : {\n            default : null,\n            type    : cc.Prefab,\n        },\n    },\n    \n    // use this for initialization\n    onLoad: function () {\n        this.nodeWidth = this.node.width;\n        this.nodeHeight = this.node.height;\n        //预制体的下落速度\n        this.speed = 480;\n        //这个预制体是否可以改变状态比如旋转，移动\n        this.IsChange = true;\n        //存放每次生成的预制体数组\n        this.nodeArr =this.createShape(this.node,-this.prefabHeight,this.nodeHeight/2 - this.prefabHeight);\n\n    },\n    createPrefab : function(prefab){\n        var prefabNode = cc.instantiate(prefab);\n        return prefabNode;\n    },\n    createShape : function(parentNode,x,y){\n        //用来存放预制体的数组\n        var prefabArrTemp = [];\n        for(var i = 0;i < 3;i++){\n            var offSet = i * this.prefabHeight * 2;\n            cc.log(\"offSet is \" + offSet);\n            //产生0-3的随机数\n            var index = Math.floor(Math.random()*3);\n            cc.log(\"inde is \" + index);\n            //将对应的预制体取出来转化为节点\n            var prefabNode = this.createPrefab(this.prefabArr[i]);\n            cc.log(\"x is \" + x + \" and y is \"+ y - offSet);\n            prefabNode.setPosition(x,y - offSet);\n            //将该预制节点添加为parentNode的孩子\n            parentNode.addChild(prefabNode);\n            //将当前预制体节点存放到预制体临时数组里面\n            prefabArrTemp.push(prefabNode);\n\n        }\n        console.log(prefabArrTemp);\n        return prefabArrTemp;\n    },\n    // called every frame\n    update: function (dt) {\n        //如果当前状态是处于可以改变状态\n        if(this.IsChange){\n            this.updatePrefatY(dt);\n        }\n    },\n    updatePrefatY : function(dt){\n        for(var i = 0; i < this.nodeArr.length;i++){\n            this.nodeArr[i].y -= this.speed * dt;\n            //\n            if(i === 2){\n                console.log(-this.nodeHeight/2 + this.prefabHeight);\n                this.nodeArr[i].y <= -this.nodeHeight/2 + this.prefabHeight;\n                //这个预制体已经触底了将这个预制体修改为不可改变状态\n                this.scheduleOnce(function(){\n                    //修改可改变状态\n                    this.IsChange = false;\n                },1);\n                \n            }\n        }\n    },\n    showNext : function(){\n        var prefabNext = this.createPrefab();\n    },\n    //创建游戏场景主背景20行10列\n    createBackOfGame : function(){\n        for(var i = 0;i < 20;i++){\n            for(var j = 0;j < 10;j++){\n                this.createPrefab();\n            }\n        }\n    }\n});\n"]}